<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–∑—É—á–µ–Ω–∏–µ —á–µ—à—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="mainScreen" class="screen active">
            <h1>üá®üáø –ò–∑—É—á–µ–Ω–∏–µ —á–µ—à—Å–∫–æ–≥–æ</h1>
            <p class="subtitle">–¢–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ —á–µ—à—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</p>
            
            <button class="button" onclick="showSetSelector()">–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é –æ–±—É—á–µ–Ω–∏—è</button>
            <button class="button secondary" onclick="showScreen('setsScreen')">–ù–∞–±–æ—Ä—ã —Å–ª–æ–≤</button>
            <button class="button secondary" onclick="showScreen('statsScreen')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            
            <div id="mainStats" style="margin-top: 30px;"></div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ –Ω–∞–±–æ—Ä–∞ -->
        <div id="setSelectorScreen" class="screen">
            <button class="button back-btn" onclick="showScreen('mainScreen')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–í—ã–±–µ—Ä–∏ –Ω–∞–±–æ—Ä –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</h2>
            
            <div class="set-selector" id="setSelector"></div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–µ—Å—Å–∏–∏ -->
        <div id="sessionParamsScreen" class="screen">
            <button class="button back-btn" onclick="returnFromSessionParams()">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–∏</h2>
            
            <div class="input-group">
                <label>–†–∞–∑–º–µ—Ä —Å–µ—Å—Å–∏–∏</label>
                <select id="sessionSize">
                    <option value="10">–ë—ã—Å—Ç—Ä–∞—è (10 —Å–ª–æ–≤)</option>
                    <option value="20" selected>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è (20 —Å–ª–æ–≤)</option>
                    <option value="30">–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è (30 —Å–ª–æ–≤)</option>
                    <option value="all">–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä (–≤—Å–µ —Å–ª–æ–≤–∞)</option>
                </select>
            </div>

            <div class="input-group">
                <label>–†–µ–∂–∏–º –ø–æ–¥–±–æ—Ä–∞</label>
                <select id="selectionMode">
                    <option value="smart" selected>–£–º–Ω—ã–π –ø–æ–¥–±–æ—Ä (–Ω–æ–≤—ã–µ + –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ)</option>
                    <option value="random">–°–ª—É—á–∞–π–Ω—ã–µ —Å–ª–æ–≤–∞</option>
                    <option value="problematic">–¢–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ (&lt; 50%)</option>
                    <option value="new">–¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ (–Ω–µ –∏–∑—É—á–∞–ª–∏—Å—å)</option>
                </select>
            </div>

            <button class="button" onclick="startSessionWithParams()">‚ñ∂ –ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –Ω–∞–±–æ—Ä–∞ —Å–ª–æ–≤ -->
        <div id="setPreviewScreen" class="screen">
            <div class="sticky-buttons">
                <div class="button-row">
                    <button class="button back-btn" onclick="closeSetPreview()" style="flex: 1;">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="button" onclick="startSessionFromPreview()" style="flex: 1;">‚ñ∂ –ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
                </div>
            </div>
            
            <h2 id="previewSetTitle">–ù–∞–±–æ—Ä —Å–ª–æ–≤</h2>
            <div id="previewSetInfo" style="margin-bottom: 20px; color: #666;"></div>
            
            <div id="previewWordsList"></div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –Ω–∞–±–æ—Ä–æ–≤ —Å–ª–æ–≤ -->
        <div id="setsScreen" class="screen">
            <button class="button back-btn" onclick="showScreen('mainScreen')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–ù–∞–±–æ—Ä—ã —Å–ª–æ–≤</h2>
            
            <div id="setsContainer" class="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–±–æ—Ä–æ–≤...</div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div id="statsScreen" class="screen">
            <button class="button back-btn" onclick="showScreen('mainScreen')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞–º–∏</h2>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalWords">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Å–ª–æ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="learnedWords">0</div>
                    <div class="stat-label">–ò–∑—É—á–µ–Ω–æ</div>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <select id="setFilter" onchange="updateStatsScreen()">
                        <option value="">–í—Å–µ –Ω–∞–±–æ—Ä—ã</option>
                    </select>
                </div>
                <div class="filter-group">
                    <input type="text" id="wordSearch" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–ª–æ–≤–∞–º..." oninput="updateStatsScreen()">
                </div>
                <div>
                    <button class="sort-toggle" onclick="toggleSort()">
                        <span id="sortLabel">–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ</span>
                        <span id="sortIcon">‚Üì</span>
                    </button>
                </div>
            </div>

            <button class="button secondary" onclick="exportWords()">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–ª–æ–≤–∞ (JSON)</button>
            <button class="button" onclick="resetStats()" style="background: #ff9800;">–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>

            <div id="wordListContainer" class="word-list"></div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω –æ–±—É—á–µ–Ω–∏—è -->
        <div id="learningScreen" class="screen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
                <div class="progress-text dark" id="progressText">0%</div>
            </div>

            <div class="stats" style="margin-bottom: 20px;">
                <div class="stat-item">
                    <div class="stat-value" id="sessionCorrect">0</div>
                    <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="sessionIncorrect">0</div>
                    <div class="stat-label">–û—à–∏–±–æ–∫</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="sessionRemaining">0</div>
                    <div class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å</div>
                </div>
            </div>

            <div id="questionContainer"></div>

            <button class="button back-btn" onclick="endSession()">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é</button>
        </div>

        <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
        <div id="resultsScreen" class="screen">
            <h2>üéâ –°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
            
            <div class="stats" style="margin: 30px 0;">
                <div class="stat-item">
                    <div class="stat-value" id="finalCorrect">0</div>
                    <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="finalIncorrect">0</div>
                    <div class="stat-label">–û—à–∏–±–æ–∫</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="finalAccuracy">0%</div>
                    <div class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</div>
                </div>
            </div>

            <button class="button" onclick="showSetSelector()">–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é</button>
            <button class="button secondary" onclick="showScreen('setsScreen')">–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –Ω–∞–±–æ—Ä</button>
            <button class="button secondary" onclick="showScreen('mainScreen')">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/sets.js"></script>
    <script src="js/learning.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
